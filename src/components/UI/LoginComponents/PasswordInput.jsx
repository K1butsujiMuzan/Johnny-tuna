import styles from "./LoginComponents.module.css"
import {useState, forwardRef} from "react";

const PasswordInput = forwardRef(({
  minLength,
  maxLength,
  placeholder,
  name,
  value,
  onChange,
  required = false,
  disabled = false,
}, ref) => {
  const [isHidden, setIsHidden] = useState(true)

  return(
    <span className={styles.passwordBlock}>
        <input
          ref={ref}
          className={`${styles.mainInput} ${styles.passwordInput}`}
          type={isHidden ? "password" : "text"}
          minLength={minLength}
          maxLength={maxLength}
          placeholder={placeholder}
          name={name}
          value={value}
          onChange={onChange}
          required={required}
          disabled={disabled}
        />
          <button
            type={"button"}
            className={styles.passwordButton}
            aria-label={isHidden ? "Показать" : "Спрятать"}
            onClick={() => setIsHidden(!isHidden)}
            aria-expanded={!isHidden}
          >
            {isHidden && (
              <svg
                aria-hidden={true}
                className={styles.passwordIcon}
                width="35" height="35" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg"
              >
                <path fillRule="evenodd" clipRule="evenodd" d="M2.34229 8.86755C3.08258 8.55029 3.93991 8.89322 4.25718 9.63351L2.91676 10.208C4.25718 9.63351 4.25739 9.63399 4.25718 9.63351L4.25643 9.63176C4.25632 9.6315 4.25602 9.63081 4.25643 9.63176L4.26214 9.64468C4.26799 9.65784 4.27802 9.68018 4.29232 9.71109C4.32088 9.77296 4.36637 9.86903 4.42906 9.99443C4.55457 10.2454 4.74841 10.6126 5.01299 11.0571C5.54383 11.9489 6.35032 13.1367 7.44897 14.3198C7.70792 14.5986 7.98197 14.8763 8.27144 15.1489C8.28354 15.1599 8.2955 15.1712 8.30731 15.1825C10.4725 17.2101 13.4931 18.958 17.5002 18.958C19.2631 18.958 20.8227 18.6214 22.1973 18.0804C23.9852 17.3766 25.4838 16.3171 26.7104 15.1659C28.0952 13.866 29.1124 12.4685 29.784 11.3907C30.1185 10.8539 30.3637 10.4022 30.5229 10.09C30.6024 9.93403 30.6603 9.81338 30.6968 9.73491C30.7151 9.69568 30.7281 9.66704 30.7357 9.64983L30.743 9.63351C31.0605 8.89363 31.9178 8.55036 32.6579 8.86755C33.3982 9.18483 33.7412 10.0422 33.4238 10.7824L32.0835 10.208C33.4238 10.7824 33.424 10.7821 33.4238 10.7824L33.4206 10.7898L33.4155 10.8018L33.3988 10.8395C33.3849 10.8705 33.3654 10.9135 33.3403 10.9673C33.2901 11.0751 33.2172 11.2267 33.1211 11.4151C32.9292 11.7916 32.6435 12.3168 32.2594 12.9331C31.6722 13.8754 30.8468 15.0441 29.7642 16.2226L30.9272 17.3855C31.4967 17.955 31.4967 18.8784 30.9272 19.4479C30.3576 20.0174 29.4343 20.0174 28.8647 19.4479L27.6395 18.2226C26.8166 18.8873 25.8958 19.5141 24.8732 20.055L26.0141 21.8085C26.4533 22.4835 26.2623 23.3868 25.5871 23.8262C24.912 24.2655 24.0087 24.0743 23.5695 23.3992L22.1323 21.1904C21.1421 21.4941 20.0843 21.7092 18.9585 21.8099V24.0622C18.9585 24.8676 18.3055 25.5205 17.5002 25.5205C16.6947 25.5205 16.0418 24.8676 16.0418 24.0622V21.8102C14.9121 21.7093 13.8545 21.4938 12.8675 21.191L11.4308 23.3992C10.9915 24.0743 10.0882 24.2655 9.41308 23.8262C8.73799 23.3868 8.54681 22.4835 8.98608 21.8085L10.1271 20.0548C9.10607 19.5145 8.18499 18.8876 7.36104 18.2223L6.13546 19.4479C5.56595 20.0174 4.64258 20.0174 4.07307 19.4479C3.50355 18.8784 3.50355 17.955 4.07307 17.3855L5.236 16.2226C4.00371 14.8812 3.10309 13.5508 2.50673 12.5489C2.20166 12.0364 1.97394 11.6061 1.82031 11.2988C1.74344 11.1451 1.68496 11.0218 1.64446 10.9341C1.62421 10.8903 1.60844 10.8553 1.59711 10.8298L1.58342 10.7988L1.57906 10.7887L1.5775 10.7851L1.57687 10.7837C1.57659 10.783 1.57634 10.7824 2.91676 10.208L1.57687 10.7837C1.2596 10.0434 1.602 9.18483 2.34229 8.86755Z"/>
              </svg>
            )}
            {!isHidden && (
              <svg
                aria-hidden={true}
                className={styles.passwordIcon}
                width="35" height="35" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M14.2188 17.5C14.2188 15.6879 15.6879 14.2188 17.5 14.2188C19.3121 14.2188 20.7813 15.6879 20.7813 17.5C20.7813 19.3121 19.3121 20.7813 17.5 20.7813C15.6879 20.7813 14.2188 19.3121 14.2188 17.5Z" fill="#1C274C"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M2.9165 17.5C2.9165 19.8908 3.53624 20.696 4.77572 22.3063C7.25061 25.5215 11.4012 29.1667 17.4998 29.1667C23.5984 29.1667 27.749 25.5215 30.2239 22.3063C31.4634 20.696 32.0832 19.8908 32.0832 17.5C32.0832 15.1092 31.4634 14.3041 30.2239 12.6939C27.749 9.47857 23.5984 5.83337 17.4998 5.83337C11.4012 5.83337 7.25061 9.47857 4.77572 12.6939C3.53624 14.3041 2.9165 15.1092 2.9165 17.5ZM17.4998 12.0313C14.4795 12.0313 12.0311 14.4797 12.0311 17.5C12.0311 20.5204 14.4795 22.9688 17.4998 22.9688C20.5202 22.9688 22.9686 20.5204 22.9686 17.5C22.9686 14.4797 20.5202 12.0313 17.4998 12.0313Z" fill="#1C274C"/>
              </svg>
            )}
          </button>
      </span>
  )
})

export default PasswordInput